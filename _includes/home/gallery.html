<section class="section section--gallery" id="gallery">

  <h2 class="section-title" data-secondaryheading="gallery">Gallery</h2>
  <div class="container--gallery">
    <div class="gallery-wrapper">
      <div class="gallery-scroller">
        {% for item in site.gallery %}
          <div data-target="#gallery-item-{{ forloop.index }}-1-overlay" class="gallery-item" style="transition-duration: 2000ms">
            {% assign firstImage = item.images | first %}
            {% include cloudinarylazy.html img=firstImage.file width="600" height="350" sizes="(min-width: 900px) 65vw, 100vw" quality="85" modes="c_fill,e_grayscale" %}
            <h3 class="gallery-item-title">{{ item.title }}</h3>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="gallery-lightboxes debug">
    {% for item in site.gallery %}
      {% assign areaIndex = forloop.index %}
      {% for image in item.images %}
        {% assign imageIndex = forloop.index %}
        <div class="lightbox" id="gallery-item-{{areaIndex}}-{{ imageIndex }}-overlay">
          <div class="lightbox-image">
            <div style="position: relative;">
              {% include cloudinarylazy.html img=image.file width="900" height="675" sizes="(min-width: 900px) 70vw, 100vw" quality="85" %}
              {% for marker in image.markers %}
                <div class="hotspot gallery-hotspot" data-target="gallery--hotspot-{{ areaIndex }}-{{ imageIndex }}-{{ forloop.index }}" style="left: {{ marker.x}}%; top: {{ marker.y }}%">{{ forloop.index }}</div>
              {% endfor %}
            </div>
          </div>
          <div class="lightbox-text">
            <h3>{{ item.title }}</h3>
            <em>{{ image.title }}</em>
            <div class="lightbox-text-inner">
              {{ item.content | markdownify }}
            </div>
            <div class="lightbox-marker-content">
              {% for marker in image.markers %}
                <div class="lightbox-text-marker highlight" id="gallery--hotspot-{{ areaIndex }}-{{ imageIndex }}-{{ forloop.index }}">
                  <h3>{{ marker.title }}</h3>
                  <p>{{ marker.text }}</p>
                </div>
              {% endfor %}
            </div>

            <div class="lightbox-navigation"><a href="#" class="previous">Previous</a><a href="#" class="next">Next</a><a href="#" class="close">Close</a></div>
          </div>
        </div>
      {% endfor %}
    {% endfor %}
  </div>

</section>